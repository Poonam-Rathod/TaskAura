{% extends 'tasks/base.html' %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6">
        <div class="dashboard-card p-5 shadow-lg">
            <h2 class="mb-4 text-center fw-bold">Edit Task</h2>
            
            <!-- Flash Messages -->
            {% if messages %}
  {% for message in messages %}
    {% if "update" in message.tags %}
      <div class="alert alert-success alert-dismissible fade show">
        {{ message }}
      </div>
    {% endif %}
  {% endfor %}
{% endif %}


            <!-- Edit Task Form -->
            <form id="editTaskForm" method="POST">
                {% csrf_token %}
                
                <div class="form-floating mb-4">
                    <input type="text" class="form-control" id="title" name="title" value="{{ task.title }}" placeholder="Task Title" required>
                    <label for="title">Task Title</label>
                </div>

                <div class="d-flex justify-content-center gap-3">
                    <button type="submit" class="btn btn-gradient btn-lg fw-semibold">
                        <i class="bi bi-pencil-square me-2"></i> Update Task
                    </button>
                    <a href="{% url 'home' %}" class="btn btn-outline-secondary btn-lg">
                        <i class="bi bi-x-circle me-2"></i> Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
/* Card styling */
.dashboard-card {
    border-radius: 20px;
    background: #ffffff;
    transition: all 0.3s ease;
}
.dashboard-card:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 15px 35px rgba(0,0,0,0.15);
}

/* Gradient Update Button */
.btn-gradient {
    background: linear-gradient(135deg, #800000, #b3003b);
    color: #fff;
    border: none;
    border-radius: 50px;
    padding: 12px 25px;
    transition: all 0.3s ease;
}
.btn-gradient:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(179,0,59,0.4);
}

/* Cancel Button Hover */
.btn-outline-secondary:hover {
    background-color: #f8f9fa;
    color: #b3003b;
    transform: translateY(-2px);
}

/* Floating Labels */
.form-floating > .form-control:focus ~ label,
.form-floating > .form-control:not(:placeholder-shown) ~ label {
    color: #b3003b;
    transform: scale(.85) translateY(-1.5rem);
}

/* Dark Mode */
body.dark-mode .dashboard-card {
    background: #2b2b3b;
    color: #e0e0e0;
}
body.dark-mode .btn-gradient {
    background: linear-gradient(135deg, #b3003b, #e6005c);
}
body.dark-mode .btn-outline-secondary:hover {
    background-color: #3a3a4a;
    color: #ffccd5;
}
</style>

<script>
const form = document.getElementById('editTaskForm');
form.addEventListener('submit', (e) => {
    const btn = form.querySelector('button[type="submit"]');
    btn.disabled = true;
    btn.innerHTML = '<i class="bi bi-check-circle-fill me-2"></i> Saving...';
    setTimeout(() => form.submit(), 800);
});
</script>
{% endblock %}
